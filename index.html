<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>assemble-numbers-client</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">assemble-numbers-client</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> assemble-numbers-client</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="assemble-numbers-client">Assemble Numbers Client</h1>
				<p>For P2P texting and calling applications, it’s useful to lookup information about a phone number before you text or call it, since it lets you know whether the number is reachable by the desired method.</p>
				<p>Under most circumstances, it will save you money – suppose</p>
				<ul>
					<li>sending texts costs $0.0075 per segment</li>
					<li>50% of your numbers are landlines (a reasonable assumption when working with voter file data)</li>
					<li>it costs $0.0025 to look up a number</li>
					<li>you are going to text 100,000 people</li>
				</ul>
				<p>With prior validation of numbers, it will cost you:</p>
				<pre><code>(<span class="hljs-number">50</span>,<span class="hljs-number">000</span> * <span class="hljs-number">.0025</span>) + (<span class="hljs-number">50</span>,<span class="hljs-number">000</span> * (<span class="hljs-number">.0025</span> + <span class="hljs-number">.0075</span>)) = <span class="hljs-number">625</span></code></pre><p>Without prior validation, it will cost:</p>
				<pre><code><span class="hljs-number">100</span>,<span class="hljs-number">000</span> * <span class="hljs-number">.0075</span> = <span class="hljs-number">750</span></code></pre><p>Savings!</p>
				<p>However, you are probably going to text the same contacts over and over again – without validating, you may end up re-texting landlines, if you are not meticulously tracking and handling response codes from the SMS service.</p>
				<p>Assemble Numbers is a small service in Beta for looking up and storing carrier information about cell phone numbers. It provides an asynchronous, batch-based API for requesting information about large amounts of numbers at a time.</p>
				<p>To get an API key, head to <a href="https://airtable.com/shruW0ZhyOSw3KzIw">https://airtable.com/shruW0ZhyOSw3KzIw</a>.</p>
				<h1 id="usage">Usage</h1>
				<p>Fetching data from Assemble Numbers is done via batched requests. You create a request, add numbers to the request, close the request, and then await its completion.</p>
				<p>If using batch requests and the Assemble service, lookups can run as fast as 500 numbers/second.</p>
				<h2 id="batch-requests">Batch Requests</h2>
				<pre><code class="language-javascript"><span class="hljs-comment">// ES Module style</span>
<span class="hljs-keyword">import</span> NumbersClient <span class="hljs-keyword">from</span> <span class="hljs-string">'assemble-numbers-client'</span>;

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">apiKey</span>: <span class="hljs-string">'YOUR_ASSEMBLE_NUMBERS_API_KEY'</span>
};

<span class="hljs-keyword">const</span> numbersClient = <span class="hljs-keyword">new</span> NumbersClient(options);

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterNumbersForType</span>(<span class="hljs-params">phoneNumbers: [string], type: string</span>) </span>{
  <span class="hljs-keyword">const</span> request = <span class="hljs-keyword">await</span> numbersClient.createRequest();

  <span class="hljs-comment">// addPhoneNumbersToRequest to request accepts a maximum of 500 numbers</span>
  <span class="hljs-comment">// at a time</span>
  <span class="hljs-comment">// you can put up to 500,000 numbers in a single request</span>
  <span class="hljs-keyword">await</span> request.addPhoneNumbersToRequest(phoneNumbers);

  <span class="hljs-keyword">await</span> request.close();

  <span class="hljs-keyword">await</span> request.waitUntilDone({
    <span class="hljs-attr">onProgressUpdate</span>: <span class="hljs-function">(<span class="hljs-params">countCompleted, total</span>) =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Completed <span class="hljs-subst">${countCompleted}</span> out of <span class="hljs-subst">${total}</span>`</span>);
    }
  });

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> request.mobiles.eachPage({
    <span class="hljs-attr">pageSize</span>: n,
    <span class="hljs-attr">onPage</span>: <span class="hljs-keyword">async</span> (numbers, pageNumber) =&gt; {
      <span class="hljs-comment">// all of these numbers are mobiles</span>
      <span class="hljs-comment">// do something with them!</span>
    }
  });

  <span class="hljs-comment">// other methods on a finished request include:</span>
  <span class="hljs-comment">// request.landlines.each();</span>
  <span class="hljs-comment">// request.others.each();</span>
}</code></pre>
				<h1 id="full-documentation">Full Documentation</h1>
				<p>Full documentation is available <a href="https://politics-rewired.github.io/numbers-client/">here</a>.</p>
				<h1 id="additional-details">Additional Details</h1>
				<h2 id="additional-carrier-info">Additional Carrier Info</h2>
				<p>When we look up a number, we not only get information about the phone type (mobile, landline, or VOIP (other)), but we also learn the carrier and some other data.</p>
				<p>Although at the moment (beginning of July), the Assemble API only exposes the phone type, we will be incorporating additional information into the API soon, and you will be able to access all of that information for numbers you have already looked up without additional charges.</p>
				<p>If you need that information now, please get in touch via email at <a href="mailto:admin@politicsrewired.com">admin@politicsrewired.com</a>.</p>
				<h1 id="can-this-also-do-_-">Can This Also Do <strong>_</strong>?</h1>
				<p>If you are interested in a different or expanded use case for Assemble LRN, we’re likely interested!</p>
				<p>Examples include:</p>
				<ul>
					<li>A version of this library in a different programming language (Python, Ruby, etc.)</li>
					<li>A service that would use this library to clean and annotate the numbers in my CRM</li>
				</ul>
				<p>Contact <a href="mailto:admin@politicsrewired.com">admin@politicsrewired.com</a> with inquiries!</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/numbersclient.html" class="tsd-kind-icon">Numbers<wbr>Client</a>
					</li>
					<li class=" tsd-kind-class tsd-is-not-exported">
						<a href="classes/request.html" class="tsd-kind-icon">Request</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#addphonenumbersresponse" class="tsd-kind-icon">Add<wbr>Phone<wbr>Numbers<wbr>Response</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#eachpageoptions" class="tsd-kind-icon">Each<wbr>Page<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#numbersclientconstructor" class="tsd-kind-icon">Numbers<wbr>Client<wbr>Constructor</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#progressupdate" class="tsd-kind-icon">Progress<wbr>Update</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#requestconstructoroptions" class="tsd-kind-icon">Request<wbr>Constructor<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-is-not-exported">
						<a href="globals.html#waituntildoneoptions" class="tsd-kind-icon">Wait<wbr>Until<wbr>Done<wbr>Options</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#add_phone_numbers_to_request" class="tsd-kind-icon">ADD_<wbr>PHONE_<wbr>NUMBERS_<wbr>TO_<wbr>REQUEST</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#close_request" class="tsd-kind-icon">CLOSE_<wbr>REQUEST</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#create_request" class="tsd-kind-icon">CREATE_<wbr>REQUEST</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#default_endpoint" class="tsd-kind-icon">DEFAULT_<wbr>ENDPOINT</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#default_page_size" class="tsd-kind-icon">DEFAULT_<wbr>PAGE_<wbr>SIZE</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#default_poll_interval" class="tsd-kind-icon">DEFAULT_<wbr>POLL_<wbr>INTERVAL</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#max_numbers_per_request" class="tsd-kind-icon">MAX_<wbr>NUMBERS_<wbr>PER_<wbr>REQUEST</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#request_progress" class="tsd-kind-icon">REQUEST_<wbr>PROGRESS</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#request_results_by_type" class="tsd-kind-icon">REQUEST_<wbr>RESULTS_<wbr>BY_<wbr>TYPE</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>